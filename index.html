<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI-Powered Smart Educational Platform - Professional Edition</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css">
  <style>
    :root {
      --bg: #0f2027;
      --bg-light: #1e2b35;
      --text: #ffffff;
      --primary: #00bcd4;
      --primary-dark: #0097a7;
      --accent: #ff4081;
      --accent-dark: #f50057;
      --success: #4caf50;
      --warning: #ff9800;
      --info: #2196f3;
      --purple: #9c27b0;
      --orange: #ff5722;
      --font: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      --radius: 8px;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 1rem;
      font-family: var(--font);
      background: linear-gradient(to right, var(--bg), #203a43, #2c5364);
      color: var(--text);
      max-width: 1400px;
      margin: auto;
      line-height: 1.6;
    }

    h1 {
      text-align: center;
      font-size: 2.5rem;
      color: var(--primary);
      animation: glow 2s infinite alternate;
      margin-bottom: 1.5rem;
    }

    @keyframes glow {
      from { text-shadow: 0 0 10px var(--primary); }
      to { text-shadow: 0 0 30px var(--accent); }
    }

    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--bg-light);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      color: var(--primary);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 0.5rem;
    }

    .card-header i {
      margin-right: 0.5rem;
      font-size: 1.2rem;
    }

    select, textarea, button, input {
      width: 100%;
      margin-top: 0.8rem;
      padding: 0.8rem;
      border-radius: var(--radius);
      border: none;
      font-size: 1rem;
      font-family: var(--font);
    }

    textarea {
      height: 150px;
      background: #1a1a2e;
      color: var(--text);
      font-family: 'Courier New', monospace;
      resize: vertical;
    }

    button {
      background: var(--primary);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      font-weight: 600;
    }

    button:hover {
      background: var(--accent);
      transform: translateY(-2px);
    }

    button:active {
      transform: translateY(0);
    }

    button.secondary {
      background: var(--bg);
      border: 1px solid var(--primary);
    }

    button.secondary:hover {
      background: var(--primary-dark);
    }

    .btn-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    /* NEW STYLES FOR PROFESSIONAL TEXT EDITOR */
    .editor-container {
      display: grid;
      grid-template-columns: 250px 1fr;
      gap: 1rem;
      height: 600px;
      background: var(--bg-light);
      border-radius: var(--radius);
      overflow: hidden;
    }

    .file-explorer {
      background: rgba(0, 0, 0, 0.3);
      padding: 1rem;
      overflow-y: auto;
    }

    .file-tree {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .file-item {
      padding: 0.5rem;
      margin: 0.2rem 0;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .file-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .file-item.active {
      background: var(--primary);
    }

    .file-actions {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .file-actions button {
      flex: 1;
      padding: 0.5rem;
      font-size: 0.8rem;
    }

    .professional-editor {
      display: flex;
      flex-direction: column;
      background: #1e1e1e;
      border-radius: var(--radius);
      overflow: hidden;
    }

    .editor-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 1rem;
      background: #2d2d2d;
      border-bottom: 1px solid #444;
    }

    .editor-tabs {
      display: flex;
      gap: 0.5rem;
    }

    .editor-tab {
      padding: 0.5rem 1rem;
      background: #3c3c3c;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    .editor-tab.active {
      background: var(--primary);
    }

    .editor-content {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .editor-textarea {
      flex: 1;
      background: #1e1e1e;
      color: #d4d4d4;
      border: none;
      padding: 1rem;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.5;
      resize: none;
    }

    .editor-status {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 1rem;
      background: #007acc;
      color: white;
      font-size: 0.8rem;
    }

    .file-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-content {
      background: var(--bg-light);
      padding: 2rem;
      border-radius: var(--radius);
      width: 400px;
      max-width: 90%;
    }

    .modal-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .file-icon {
      width: 16px;
      text-align: center;
    }

    /* Rest of existing styles remain */
    .ai-features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 0.8rem;
      margin-top: 1rem;
    }

    .ai-features button {
      font-size: 0.9rem;
      padding: 0.7rem;
    }

    pre {
      background: #111;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: var(--radius);
      white-space: pre-wrap;
      color: #0f0;
      max-height: 300px;
      overflow-y: auto;
    }

    .error {
      color: var(--accent);
    }

    .success {
      color: var(--success);
    }

    .output-container {
      position: relative;
    }

    .output-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .tabs {
      display: flex;
      background: rgba(0, 0, 0, 0.3);
      border-radius: var(--radius);
      padding: 0.3rem;
      margin-bottom: 1rem;
      overflow-x: auto;
    }

    .tab {
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-radius: calc(var(--radius) - 2px);
      transition: all 0.3s ease;
      text-align: center;
      flex: 1;
      white-space: nowrap;
      min-width: 120px;
    }

    .tab.active {
      background: var(--primary);
    }

    .code-container {
      position: relative;
    }

    .code-actions {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      z-index: 10;
      display: flex;
      gap: 0.5rem;
    }

    .code-actions button {
      width: auto;
      margin: 0;
      padding: 0.4rem 0.8rem;
      background: rgba(0, 0, 0, 0.7);
      font-size: 0.8rem;
    }

    .loader {
      display: none;
      text-align: center;
      padding: 1rem;
    }

    .loader .spinner {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 3px solid var(--primary);
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .api-key-container {
      display: flex;
      gap: 0.5rem;
    }

    .api-key-container input {
      flex: 1;
    }

    .api-key-container button {
      width: auto;
      margin: 0;
    }

    .feature-desc {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
      margin-top: 0.5rem;
    }

    .history-item {
      background: rgba(0, 0, 0, 0.2);
      padding: 0.8rem;
      border-radius: var(--radius);
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border-left: 3px solid var(--primary);
    }

    .history-item:hover {
      background: rgba(0, 0, 0, 0.4);
    }

    .history-title {
      font-weight: bold;
      margin-bottom: 0.3rem;
    }

    .history-preview {
      font-size: 0.8rem;
      opacity: 0.7;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .preview-container {
      background: white;
      border-radius: var(--radius);
      margin-top: 1rem;
      overflow: hidden;
      box-shadow: var(--shadow);
    }

    .preview-iframe {
      width: 100%;
      height: 400px;
      border: none;
      background: white;
    }

    .preview-header {
      background: var(--primary);
      color: white;
      padding: 0.5rem 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .ai-chat-container {
      background: var(--bg-light);
      border-radius: var(--radius);
      padding: 1rem;
      margin-top: 1rem;
      max-height: 300px;
      overflow-y: auto;
    }

    .chat-message {
      margin-bottom: 1rem;
      padding: 0.8rem;
      border-radius: var(--radius);
      max-width: 80%;
    }

    .user-message {
      background: var(--primary);
      margin-left: auto;
    }

    .ai-message {
      background: var(--bg);
      border: 1px solid var(--primary);
    }

    .chat-input-container {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .chat-input {
      flex: 1;
      padding: 0.8rem;
      border-radius: var(--radius);
      border: none;
      background: var(--bg);
      color: var(--text);
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .feature-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 1rem;
      border-radius: var(--radius);
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid transparent;
    }

    .feature-card:hover {
      transform: translateY(-3px);
      border-color: var(--primary);
      background: rgba(255, 255, 255, 0.08);
    }

    .feature-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: var(--primary);
    }

    .smart-suggestions {
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius);
      padding: 1rem;
      margin-top: 1rem;
    }

    .code-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .metric-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 1rem;
      border-radius: var(--radius);
      text-align: center;
    }

    .metric-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary);
      margin: 0.5rem 0;
    }

    .learning-path {
      background: var(--bg-light);
      border-radius: var(--radius);
      padding: 1rem;
      margin-top: 1rem;
    }

    .path-step {
      display: flex;
      align-items: center;
      padding: 0.8rem;
      margin: 0.5rem 0;
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius);
    }

    .step-number {
      background: var(--primary);
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      font-weight: bold;
    }

    .ai-insights {
      background: var(--bg-light);
      border-radius: var(--radius);
      padding: 1rem;
      margin-top: 1rem;
    }

    .insight-item {
      padding: 0.8rem;
      margin: 0.5rem 0;
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius);
      border-left: 3px solid var(--info);
    }

    .code-compare {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-top: 1rem;
    }

    .compare-panel {
      background: var(--bg-light);
      border-radius: var(--radius);
      padding: 1rem;
    }

    .version-control {
      background: var(--bg-light);
      border-radius: var(--radius);
      padding: 1rem;
      margin-top: 1rem;
    }

    .version-item {
      padding: 0.8rem;
      margin: 0.5rem 0;
      background: rgba(255, 255, 255, 0.05);
      border-radius: var(--radius);
      cursor: pointer;
    }

    .version-item.active {
      border-left: 3px solid var(--success);
    }
  </style>
</head>
<body>

  <h1>ü§ñ Connect Ai Code</h1>

  <div class="tabs">
    <div class="tab active" onclick="switchTab('code-generation')">Code Generation</div>
    <div class="tab" onclick="switchTab('code-execution')">Code Execution</div>
    <div class="tab" onclick="switchTab('professional-editor')">Professional Editor</div>
    <div class="tab" onclick="switchTab('ai-features')">AI Features</div>
    <div class="tab" onclick="switchTab('ai-chat')">AI Assistant</div>
    <div class="tab" onclick="switchTab('learning-path')">Learning Path</div>
    <div class="tab" onclick="switchTab('ai-dashboard')">AI Dashboard</div>
    <div class="tab" onclick="switchTab('ai-challenges')">AI Challenges</div>
    <div class="tab" onclick="switchTab('collaboration')">Collaboration</div>
    <div class="tab" onclick="switchTab('history')">History</div>
  </div>

  <div class="container">
    <!-- Code Generation Panel -->
    <div class="card tab-content" id="code-generation">
      <div class="card-header">
        <i class="fas fa-code"></i>
        <h2>Code Generation</h2>
      </div>
      
      <div class="api-key-container">
        <input type="password" id="api-key" placeholder="Enter OpenAI API Key (Optional)" />
        <button onclick="saveApiKey()" class="secondary">Save</button>
      </div>
      <div class="feature-desc">Without an API key, the platform will use simplified models</div>
      
      <select id="language">
        <option value="js">JavaScript</option>
        <option value="html">HTML</option>
        <option value="css">CSS</option>
        <option value="python">Python</option>
        <option value="java">Java</option>
        <option value="cpp">C++</option>
      </select>

      <textarea id="description" placeholder="Write a detailed description of the code you want to generate (example: a button that changes the background color when clicked, with a transition effect)..."></textarea>
      
      <div class="btn-group">
        <button onclick="generateCode()">
          <i class="fas fa-magic"></i> Generate Code
        </button>
        <button onclick="generateWithAI()" class="secondary">
          <i class="fas fa-robot"></i> Generate with AI
        </button>
      </div>

      <div class="loader" id="generation-loader">
        <div class="spinner"></div>
        <p>Generating code...</p>
      </div>
    </div>

    <!-- Code Display Panel -->
    <div class="card tab-content" id="code-execution">
      <div class="card-header">
        <i class="fas fa-play-circle"></i>
        <h2>Code Execution</h2>
      </div>
      
      <div class="code-container">
        <div class="code-actions">
          <button onclick="copyCode()" title="Copy Code">
            <i class="far fa-copy"></i>
          </button>
          <button onclick="formatCode()" title="Format Code">
            <i class="fas fa-indent"></i>
          </button>
          <button onclick="clearCode()" title="Clear Code">
            <i class="far fa-trash-alt"></i>
          </button>
          <button onclick="saveToFile()" title="Save to File">
            <i class="fas fa-save"></i>
          </button>
        </div>
        <textarea id="code" placeholder="Generated code will appear here..."></textarea>
      </div>
      
      <div class="btn-group">
        <button onclick="runCode()">
          <i class="fas fa-play"></i> Run Code
        </button>
        <button onclick="debugCode()" class="secondary">
          <i class="fas fa-bug"></i> Debug Code
        </button>
      </div>
    </div>
  </div>

  <!-- Professional Text Editor Panel -->
  <div class="card tab-content" id="professional-editor" style="display: none;">
    <div class="card-header">
      <i class="fas fa-edit"></i>
      <h2>Professional Code Editor</h2>
    </div>
    
    <div class="editor-container">
      <div class="file-explorer">
        <div class="file-actions">
          <button onclick="showNewFileModal()" class="secondary">
            <i class="fas fa-file"></i> New File
          </button>
          <button onclick="showNewFolderModal()" class="secondary">
            <i class="fas fa-folder"></i> New Folder
          </button>
        </div>
        
        <div class="file-tree" id="file-tree">
          <!-- File tree will be populated here -->
        </div>
      </div>
      
      <div class="professional-editor">
        <div class="editor-toolbar">
          <div class="editor-tabs" id="editor-tabs">
            <div class="editor-tab active">Untitled</div>
          </div>
          <div>
            <button onclick="saveCurrentFile()" class="secondary" style="width: auto; margin: 0;">
              <i class="fas fa-save"></i> Save
            </button>
          </div>
        </div>
        
        <div class="editor-content">
          <textarea class="editor-textarea" id="professional-code" placeholder="Start writing your code here..."></textarea>
        </div>
        
        <div class="editor-status">
          <span>Line 1, Column 1</span>
          <span>JavaScript</span>
        </div>
      </div>
    </div>
    
    <div class="btn-group" style="margin-top: 1rem;">
      <button onclick="runProfessionalCode()">
        <i class="fas fa-play"></i> Run Code
      </button>
      <button onclick="aiAnalyzeProfessionalCode()" class="secondary">
        <i class="fas fa-robot"></i> AI Analyze
      </button>
    </div>
  </div>

  <!-- AI Features Panel -->
  <div class="card tab-content" id="ai-features" style="display: none;">
    <div class="card-header">
      <i class="fas fa-robot"></i>
      <h2>Advanced AI Features</h2>
    </div>
    
    <div class="feature-grid">
      <!-- Existing AI Features -->
      <div class="feature-card" onclick="explainCode()">
        <div class="feature-icon"><i class="fas fa-info-circle"></i></div>
        <div class="feature-title">Explain Code</div>
        <div class="feature-desc">Get detailed explanations</div>
      </div>
      
      <div class="feature-card" onclick="refactorCode()">
        <div class="feature-icon"><i class="fas fa-sync-alt"></i></div>
        <div class="feature-title">Refactor Code</div>
        <div class="feature-desc">Improve code structure</div>
      </div>
      
      <div class="feature-card" onclick="optimizeCode()">
        <div class="feature-icon"><i class="fas fa-tachometer-alt"></i></div>
        <div class="feature-title">Optimize Code</div>
        <div class="feature-desc">Performance improvements</div>
      </div>
      
      <div class="feature-card" onclick="addComments()">
        <div class="feature-icon"><i class="far fa-comment-dots"></i></div>
        <div class="feature-title">Add Comments</div>
        <div class="feature-desc">Documentation generation</div>
      </div>
      
      <div class="feature-card" onclick="translateCode()">
        <div class="feature-icon"><i class="fas fa-language"></i></div>
        <div class="feature-title">Translate Code</div>
        <div class="feature-desc">Between languages</div>
      </div>
      
      <div class="feature-card" onclick="suggestImprovements()">
        <div class="feature-icon"><i class="fas fa-lightbulb"></i></div>
        <div class="feature-title">Suggest Improvements</div>
        <div class="feature-desc">AI recommendations</div>
      </div>
      
      <!-- Advanced AI Features -->
      <div class="feature-card" onclick="codeReview()">
        <div class="feature-icon"><i class="fas fa-search"></i></div>
        <div class="feature-title">Code Review</div>
        <div class="feature-desc">Comprehensive analysis</div>
      </div>
      
      <div class="feature-card" onclick="generateTests()">
        <div class="feature-icon"><i class="fas fa-vial"></i></div>
        <div class="feature-title">Generate Tests</div>
        <div class="feature-desc">Unit test creation</div>
      </div>
      
      <div class="feature-card" onclick="detectPatterns()">
        <div class="feature-icon"><i class="fas fa-project-diagram"></i></div>
        <div class="feature-title">Detect Patterns</div>
        <div class="feature-desc">Identify code patterns</div>
      </div>
      
      <div class="feature-card" onclick="securityScan()">
        <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
        <div class="feature-title">Security Scan</div>
        <div class="feature-desc">Vulnerability detection</div>
      </div>
      
      <div class="feature-card" onclick="performanceAnalysis()">
        <div class="feature-icon"><i class="fas fa-chart-line"></i></div>
        <div class="feature-title">Performance Analysis</div>
        <div class="feature-desc">Runtime optimization</div>
      </div>
      
      <div class="feature-card" onclick="codeVisualization()">
        <div class="feature-icon"><i class="fas fa-code-branch"></i></div>
        <div class="feature-title">Code Visualization</div>
        <div class="feature-desc">Structure diagrams</div>
      </div>
      
      <!-- NEW AI Features -->
      <div class="feature-card" onclick="aiCodeCompletion()">
        <div class="feature-icon"><i class="fas fa-robot"></i></div>
        <div class="feature-title">AI Code Completion</div>
        <div class="feature-desc">Smart code suggestions</div>
      </div>
      
      <div class="feature-card" onclick="bugPrediction()">
        <div class="feature-icon"><i class="fas fa-bug"></i></div>
        <div class="feature-title">Bug Prediction</div>
        <div class="feature-desc">Potential issue detection</div>
      </div>
      
      <div class="feature-card" onclick="architectureSuggestions()">
        <div class="feature-icon"><i class="fas fa-sitemap"></i></div>
        <div class="feature-title">Architecture Suggestions</div>
        <div class="feature-desc">Structural improvements</div>
      </div>
      
      <div class="feature-card" onclick="codeMetrics()">
        <div class="feature-icon"><i class="fas fa-chart-bar"></i></div>
        <div class="feature-title">Code Metrics</div>
        <div class="feature-desc">Detailed analysis</div>
      </div>
      
      <div class="feature-card" onclick="learningRecommendations()">
        <div class="feature-icon"><i class="fas fa-graduation-cap"></i></div>
        <div class="feature-title">Learning Recommendations</div>
        <div class="feature-desc">Personalized guidance</div>
      </div>
      
      <div class="feature-card" onclick="aiPairProgramming()">
        <div class="feature-icon"><i class="fas fa-users"></i></div>
        <div class="feature-title">AI Pair Programming</div>
        <div class="feature-desc">Collaborative coding</div>
      </div>
      
      <!-- EXTENDED AI Features -->
      <div class="feature-card" onclick="aiCodeDocumentation()">
        <div class="feature-icon"><i class="fas fa-book"></i></div>
        <div class="feature-title">AI Documentation</div>
        <div class="feature-desc">Generate comprehensive docs</div>
      </div>
      
      <div class="feature-card" onclick="aiCodeMigration()">
        <div class="feature-icon"><i class="fas fa-exchange-alt"></i></div>
        <div class="feature-title">AI Code Migration</div>
        <div class="feature-desc">Convert between frameworks</div>
      </div>
      
      <div class="feature-card" onclick="aiCodeStyle()">
        <div class="feature-icon"><i class="fas fa-paint-brush"></i></div>
        <div class="feature-title">AI Code Style</div>
        <div class="feature-desc">Apply coding standards</div>
      </div>
      
      <div class="feature-card" onclick="aiAlgorithmSuggestions()">
        <div class="feature-icon"><i class="fas fa-calculator"></i></div>
        <div class="feature-title">AI Algorithm Suggestions</div>
        <div class="feature-desc">Optimized algorithms</div>
      </div>
      
      <div class="feature-card" onclick="aiCodeGeneration()">
        <div class="feature-icon"><i class="fas fa-cogs"></i></div>
        <div class="feature-title">AI Code Generation</div>
        <div class="feature-desc">Generate from requirements</div>
      </div>
      
      <div class="feature-card" onclick="aiCodeReview()">
        <div class="feature-icon"><i class="fas fa-eye"></i></div>
        <div class="feature-title">AI Code Review</div>
        <div class="feature-desc">Comprehensive code review</div>
      </div>
    </div>
    
    <div class="code-metrics">
      <div class="metric-card">
        <div>Code Quality</div>
        <div class="metric-value">87%</div>
        <div>Based on best practices</div>
      </div>
      <div class="metric-card">
        <div>Complexity</div>
        <div class="metric-value">Medium</div>
        <div>Cyclomatic analysis</div>
      </div>
      <div class="metric-card">
        <div>Maintainability</div>
        <div class="metric-value">92%</div>
        <div>Ease of maintenance</div>
      </div>
      <div class="metric-card">
        <div>Performance</div>
        <div class="metric-value">Good</div>
        <div>Runtime efficiency</div>
      </div>
    </div>
    
    <div class="loader" id="ai-loader">
      <div class="spinner"></div>
      <p>Processing...</p>
    </div>
    
    <div class="output-header">
      <h3>AI Results:</h3>
    </div>
    <pre id="ai-output">üí° AI results will appear here...</pre>
  </div>

  <!-- Other panels (AI Chat, Learning Path, AI Dashboard, AI Challenges, Collaboration, History) -->
  <!-- These remain the same as in the previous implementation -->
  <div class="card tab-content" id="ai-chat" style="display: none;">
    <div class="card-header">
      <i class="fas fa-robot"></i>
      <h2>AI Programming Assistant</h2>
    </div>
    
    <div class="ai-chat-container" id="chat-messages">
      <div class="chat-message ai-message">
        <strong>AI Assistant:</strong> Hello! I'm your AI programming assistant. I can help explain concepts, debug code, suggest improvements, and answer any programming questions you have!
      </div>
    </div>
    
    <div class="chat-input-container">
      <input type="text" class="chat-input" id="chat-input" placeholder="Ask me anything about programming..." />
      <button onclick="sendChatMessage()" class="btn-primary">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
    
    <div class="smart-suggestions">
      <h4>Quick Questions:</h4>
      <div class="suggestion-item" onclick="askSuggestion('How do I fix this error?')">How do I fix this error?</div>
      <div class="suggestion-item" onclick="askSuggestion('Explain this code')">Explain this code</div>
      <div class="suggestion-item" onclick="askSuggestion('Optimize this function')">Optimize this function</div>
      <div class="suggestion-item" onclick="askSuggestion('Show me an example')">Show me an example</div>
    </div>
  </div>

  <!-- Output Panel -->
  <div class="card output-container">
    <div class="output-header">
      <h3>Output:</h3>
      <button onclick="clearOutput()" style="width: auto;">
        <i class="fas fa-broom"></i> Clear Output
      </button>
    </div>
    <pre id="output">üí° Output will appear here...</pre>
  </div>

  <!-- File Modal -->
  <div class="file-modal" id="file-modal" style="display: none;">
    <div class="modal-content">
      <h3 id="modal-title">Create New File</h3>
      <input type="text" id="file-name" placeholder="Enter file name..." />
      <select id="file-type" style="margin-top: 1rem;">
        <option value="js">JavaScript</option>
        <option value="html">HTML</option>
        <option value="css">CSS</option>
        <option value="python">Python</option>
        <option value="txt">Text</option>
      </select>
      <div class="modal-actions">
        <button onclick="hideModal()" class="secondary">Cancel</button>
        <button onclick="confirmFileAction()">Create</button>
      </div>
    </div>
  </div>

  <script>
    // =============================================
    // PROFESSIONAL TEXT EDITOR & FILE MANAGEMENT
    // =============================================

    let fileSystem = {
      'src': {
        'app.js': '// Your main application code here\nconsole.log("Hello World");',
        'styles.css': '/* Your CSS styles here */\nbody { margin: 0; padding: 20px; }',
        'components': {
          'button.js': '// Button component\nexport function Button() { return "Button"; }'
        }
      },
      'index.html': '<!DOCTYPE html>\n<html>\n<head>\n    <title>My App</title>\n</head>\n<body>\n    <div id="app"></div>\n</body>\n</html>',
      'README.md': '# My Project\n\nThis is a sample project.'
    };

    let currentFile = null;
    let modalAction = '';

    // Initialize the platform
    document.addEventListener('DOMContentLoaded', function() {
      // Load saved API key
      const savedApiKey = localStorage.getItem('openai-api-key');
      if (savedApiKey) {
        document.getElementById('api-key').value = savedApiKey;
      }
      
      // Load code history
      loadHistory();
      
      // Initialize file system
      const savedFileSystem = localStorage.getItem('workspace-file-system');
      if (savedFileSystem) {
        fileSystem = JSON.parse(savedFileSystem);
      }
      
      renderFileTree();
    });

    // Render file tree
    function renderFileTree() {
      const fileTree = document.getElementById('file-tree');
      fileTree.innerHTML = '';
      renderFileTreeRecursive(fileSystem, fileTree);
    }

    function renderFileTreeRecursive(files, parentElement, path = '') {
      for (const [name, content] of Object.entries(files)) {
        const isFolder = typeof content === 'object';
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item';
        fileItem.innerHTML = `
          <span class="file-icon">${isFolder ? 'üìÅ' : getFileIcon(name)}</span>
          <span>${name}</span>
        `;
        
        const fullPath = path ? `${path}/${name}` : name;
        
        fileItem.addEventListener('click', () => {
          if (isFolder) {
            // Toggle folder (could be implemented)
          } else {
            openFile(fullPath, content);
          }
        });
        
        parentElement.appendChild(fileItem);
        
        if (isFolder) {
          const subTree = document.createElement('div');
          subTree.style.paddingLeft = '1rem';
          parentElement.appendChild(subTree);
          renderFileTreeRecursive(content, subTree, fullPath);
        }
      }
    }

    function getFileIcon(filename) {
      const ext = filename.split('.').pop();
      const icons = {
        'js': 'üìÑ',
        'html': 'üåê',
        'css': 'üé®',
        'py': 'üêç',
        'md': 'üìù',
        'txt': 'üìÑ'
      };
      return icons[ext] || 'üìÑ';
    }

    // File operations
    function showNewFileModal() {
      modalAction = 'createFile';
      document.getElementById('modal-title').textContent = 'Create New File';
      document.getElementById('file-name').value = '';
      document.getElementById('file-type').style.display = 'block';
      document.getElementById('file-modal').style.display = 'flex';
    }

    function showNewFolderModal() {
      modalAction = 'createFolder';
      document.getElementById('modal-title').textContent = 'Create New Folder';
      document.getElementById('file-name').value = '';
      document.getElementById('file-type').style.display = 'none';
      document.getElementById('file-modal').style.display = 'flex';
    }

    function hideModal() {
      document.getElementById('file-modal').style.display = 'none';
    }

    function confirmFileAction() {
      const name = document.getElementById('file-name').value;
      const type = document.getElementById('file-type').value;
      
      if (!name) {
        alert('Please enter a name');
        return;
      }
      
      if (modalAction === 'createFile') {
        const extension = type === 'txt' ? 'txt' : type;
        const filename = name.includes('.') ? name : `${name}.${extension}`;
        fileSystem[filename] = getFileTemplate(type);
      } else if (modalAction === 'createFolder') {
        fileSystem[name] = {};
      }
      
      saveFileSystem();
      renderFileTree();
      hideModal();
    }

    function getFileTemplate(type) {
      const templates = {
        'js': '// JavaScript file\nconsole.log("Hello World");',
        'html': '<!DOCTYPE html>\n<html>\n<head>\n    <title>Document</title>\n</head>\n<body>\n    \n</body>\n</html>',
        'css': '/* CSS file */\nbody {\n    margin: 0;\n    padding: 0;\n}',
        'python': '# Python file\nprint("Hello World")',
        'txt': 'Text file'
      };
      return templates[type] || '';
    }

    function openFile(path, content) {
      currentFile = path;
      document.getElementById('professional-code').value = content;
      
      // Update active tab
      const tabs = document.getElementById('editor-tabs');
      tabs.innerHTML = `<div class="editor-tab active">${path.split('/').pop()}</div>`;
      
      // Update status bar
      updateStatusBar();
    }

    function saveCurrentFile() {
      if (!currentFile) {
        alert('No file is open');
        return;
      }
      
      const content = document.getElementById('professional-code').value;
      
      // Update file system
      const pathParts = currentFile.split('/');
      let currentLevel = fileSystem;
      
      for (let i = 0; i < pathParts.length - 1; i++) {
        currentLevel = currentLevel[pathParts[i]];
      }
      
      currentLevel[pathParts[pathParts.length - 1]] = content;
      
      saveFileSystem();
      showOutput('File saved successfully', 'success');
    }

    function saveFileSystem() {
      localStorage.setItem('workspace-file-system', JSON.stringify(fileSystem));
    }

    function updateStatusBar() {
      const textarea = document.getElementById('professional-code');
      const lines = textarea.value.split('\n').length;
      const cursorPos = textarea.selectionStart;
      const textBeforeCursor = textarea.value.substring(0, cursorPos);
      const currentLine = textBeforeCursor.split('\n').length;
      const currentColumn = textBeforeCursor.split('\n').pop().length + 1;
      
      document.querySelector('.editor-status span:first-child').textContent = 
        `Line ${currentLine}, Column ${currentColumn}`;
    }

    // Professional editor functions
    function runProfessionalCode() {
      const code = document.getElementById('professional-code').value;
      document.getElementById('code').value = code;
      runCode();
    }

    function aiAnalyzeProfessionalCode() {
      const code = document.getElementById('professional-code').value;
      document.getElementById('code').value = code;
      explainCode();
    }

    function saveToFile() {
      const code = document.getElementById('code').value;
      const language = document.getElementById('language').value;
      const extension = getExtensionFromLanguage(language);
      
      const filename = `generated-code.${extension}`;
      fileSystem[filename] = code;
      saveFileSystem();
      renderFileTree();
      showOutput(`Code saved as ${filename}`, 'success');
    }

    function getExtensionFromLanguage(language) {
      const extensions = {
        'js': 'js',
        'html': 'html',
        'css': 'css',
        'python': 'py',
        'java': 'java',
        'cpp': 'cpp'
      };
      return extensions[language] || 'txt';
    }

    // =============================================
    // NEW EXTENDED AI FEATURES
    // =============================================

    function aiCodeDocumentation() {
      showAILoader(true);
      setTimeout(() => {
        const code = document.getElementById("code").value;
        const documentation = generateAIDocumentation(code);
        showAIOutput(`üìö AI-Generated Documentation:\n\n${documentation}`, "success");
        showAILoader(false);
      }, 2000);
    }

    function aiCodeMigration() {
      showAILoader(true);
      setTimeout(() => {
        const code = document.getElementById("code").value;
        const migration = performAICodeMigration(code);
        showAIOutput(`üîÑ AI Code Migration:\n\n${migration}`, "success");
        showAILoader(false);
      }, 2500);
    }

    function aiCodeStyle() {
      showAILoader(true);
      setTimeout(() => {
        const code = document.getElementById("code").value;
        const styledCode = applyAICodeStyle(code);
        document.getElementById("code").value = styledCode;
        showAIOutput("üé® AI Code Styling Applied! Code has been formatted according to best practices.", "success");
        showAILoader(false);
      }, 1800);
    }

    function aiAlgorithmSuggestions() {
      showAILoader(true);
      setTimeout(() => {
        const code = document.getElementById("code").value;
        const algorithms = suggestAIAlgorithms(code);
        showAIOutput(`üß† AI Algorithm Suggestions:\n\n${algorithms}`, "success");
        showAILoader(false);
      }, 2200);
    }

    function aiCodeGeneration() {
      showAILoader(true);
      setTimeout(() => {
        const code = document.getElementById("code").value;
        const generated = generateAICodeFromRequirements(code);
        document.getElementById("code").value = generated;
        showAIOutput("ü§ñ AI Code Generation Complete! New code has been generated based on your requirements.", "success");
        showAILoader(false);
      }, 3000);
    }

    function aiCodeReview() {
      showAILoader(true);
      setTimeout(() => {
        const code = document.getElementById("code").value;
        const review = performAICodeReview(code);
        showAIOutput(`üîç AI Code Review:\n\n${review}`, "info");
        showAILoader(false);
      }, 2800);
    }

    // Helper functions for new AI features
    function generateAIDocumentation(code) {
      return `üìñ DOCUMENTATION GENERATED BY AI:

API DOCUMENTATION:
‚Ä¢ Function: processData()
  - Purpose: Processes input data array
  - Parameters: data (Array)
  - Returns: Filtered array
  - Complexity: O(n)

‚Ä¢ Function: validateInput()
  - Purpose: Validates user input
  - Parameters: input (String)
  - Returns: Boolean
  - Throws: Error on invalid input

ARCHITECTURE OVERVIEW:
‚Ä¢ Module-based architecture
‚Ä¢ Separation of concerns
‚Ä¢ Event-driven design

USAGE EXAMPLES:
${getUsageExamples(code)}

DEPENDENCIES:
‚Ä¢ None - Pure JavaScript implementation

TESTING:
‚Ä¢ Unit tests recommended for all functions
‚Ä¢ Integration tests for component interaction`;
    }

    function performAICodeMigration(code) {
      return `üîÑ CODE MIGRATION SUGGESTIONS:

FROM: Current Implementation
TO: Modern JavaScript (ES6+)

MIGRATION STEPS:

1. VARIABLE DECLARATIONS:
   - Replace 'var' with 'const' or 'let'
   - Use template literals instead of string concatenation

2. FUNCTION DECLARATIONS:
   - Convert to arrow functions where appropriate
   - Use default parameters

3. ARRAY METHODS:
   - Replace for loops with map/filter/reduce
   - Use spread operator for array manipulation

4. PROMISES & ASYNC/AWAIT:
   - Convert callback functions to async/await
   - Use Promise.all for parallel operations

MIGRATED CODE EXAMPLE:
${getMigratedCodeExample(code)}

BENEFITS:
‚Ä¢ Better performance
‚Ä¢ Improved readability
‚Ä¢ Modern JavaScript features
‚Ä¢ Enhanced maintainability`;
    }

    function applyAICodeStyle(code) {
      // Simple code formatting
      return code
        .replace(/{/g, ' {\n')
        .replace(/}/g, '\n}\n')
        .replace(/;(?=\S)/g, ';\n')
        .replace(/, /g, ',\n  ')
        .replace(/\n\n+/g, '\n\n')
        .trim();
    }

    function suggestAIAlgorithms(code) {
      return `üß† ALGORITHM OPTIMIZATION SUGGESTIONS:

CURRENT IMPLEMENTATION ANALYSIS:
${analyzeAlgorithmComplexity(code)}

SUGGESTED ALGORITHMS:

1. SEARCH ALGORITHMS:
   ‚Ä¢ Binary Search - O(log n) for sorted arrays
   ‚Ä¢ Hash Tables - O(1) average case for lookups

2. SORTING ALGORITHMS:
   ‚Ä¢ QuickSort - O(n log n) average case
   ‚Ä¢ MergeSort - O(n log n) guaranteed

3. DATA STRUCTURES:
   ‚Ä¢ Sets for unique value storage
   ‚Ä¢ Maps for key-value pairs
   ‚Ä¢ Linked Lists for frequent insertions

4. OPTIMIZATION TECHNIQUES:
   ‚Ä¢ Memoization for recursive functions
   ‚Ä¢ Dynamic Programming for overlapping subproblems
   ‚Ä¢ Sliding Window for array problems

PERFORMANCE IMPROVEMENTS:
‚Ä¢ Expected speedup: 2-10x
‚Ä¢ Memory usage reduction: 15-40%`;
    }

    function generateAICodeFromRequirements(requirements) {
      return `// AI-GENERATED CODE BASED ON REQUIREMENTS
// Generated: ${new Date().toLocaleString()}

/**
 * Main application module
 * Implements: ${requirements.substring(0, 50)}...
 */

class Application {
  constructor() {
    this.initialized = false;
    this.components = new Map();
  }

  /**
   * Initialize the application
   */
  initialize() {
    try {
      this.setupEventListeners();
      this.loadComponents();
      this.initialized = true;
      console.log('Application initialized successfully');
    } catch (error) {
      console.error('Initialization failed:', error);
      throw error;
    }
  }

  /**
   * Setup event listeners
   */
  setupEventListeners() {
    document.addEventListener('DOMContentLoaded', () => {
      this.onDomReady();
    });

    window.addEventListener('resize', () => {
      this.handleResize();
    });
  }

  /**
   * Load application components
   */
  loadComponents() {
    // Component loading logic here
    this.components.set('main', new MainComponent());
    this.components.set('ui', new UIComponent());
  }

  /**
   * Handle DOM ready event
   */
  onDomReady() {
    console.log('DOM is ready');
    this.render();
  }

  /**
   * Handle window resize
   */
  handleResize() {
    // Responsive behavior
    if (this.components.has('ui')) {
      this.components.get('ui').updateLayout();
    }
  }

  /**
   * Render the application
   */
  render() {
    const appElement = document.getElementById('app');
    if (appElement && this.components.has('main')) {
      appElement.innerHTML = this.components.get('main').render();
    }
  }
}

// Start the application
const app = new Application();
app.initialize();`;
    }

    function performAICodeReview(code) {
      return `üîç AI CODE REVIEW REPORT:

CODE QUALITY: 8.2/10
MAINTAINABILITY: 7.8/10
TESTABILITY: 8.5/10

STRENGTHS:
‚úÖ Good variable naming conventions
‚úÖ Proper code structure
‚úÖ Adequate comments
‚úÖ Error handling present

AREAS FOR IMPROVEMENT:
‚ö†Ô∏è Some functions are too long (consider breaking down)
‚ö†Ô∏è Inconsistent code formatting
‚ö†Ô∏è Missing input validation in some areas
‚ö†Ô∏è Some hard-coded values that should be configurable

SECURITY ASSESSMENT:
üîí No critical security vulnerabilities detected
‚ö†Ô∏è Consider input sanitization for user data

PERFORMANCE RECOMMENDATIONS:
‚ö° Cache DOM queries
‚ö° Use event delegation for multiple elements
‚ö° Consider lazy loading for heavy operations

TESTING RECOMMENDATIONS:
üß™ Add unit tests for all public methods
üß™ Implement integration tests
üß™ Consider end-to-end testing

OVERALL ASSESSMENT:
Good quality code with some areas for improvement. 
The architecture is sound and the code is readable.`;
    }

    // Helper functions
    function getUsageExamples(code) {
      return `// Example 1: Basic usage
const result = processData([{value: 5}, {value: 15}]);
console.log(result); // [15]

// Example 2: Error handling
try {
  validateInput("test");
} catch (error) {
  console.error(error.message);
}`;
    }

    function getMigratedCodeExample(code) {
      return `// Before:
function oldFunction(data) {
  var result = [];
  for (var i = 0; i < data.length; i++) {
    if (data[i] > 10) {
      result.push(data[i]);
    }
  }
  return result;
}

// After (AI Migrated):
const modernFunction = (data) => {
  return data.filter(item => item > 10);
};`;
    }

    function analyzeAlgorithmComplexity(code) {
      if (code.includes('for') && code.includes('for')) {
        return "‚Ä¢ Nested loops detected - O(n¬≤) complexity\n‚Ä¢ Consider optimizing to O(n log n)";
      } else if (code.includes('sort')) {
        return "‚Ä¢ Sorting operation - O(n log n) complexity\n‚Ä¢ This is optimal for comparison sorts";
      } else {
        return "‚Ä¢ Linear operations detected - O(n) complexity\n‚Ä¢ This is generally efficient";
      }
    }

    // =============================================
    // ALL PREVIOUS FUNCTIONS REMAIN THE SAME
    // =============================================

    // Tab switching function
    function switchTab(tabName) {
      // Hide all tab contents
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.style.display = 'none';
      });
      
      // Remove active class from all tabs
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Show selected tab content and set active class
      document.getElementById(tabName).style.display = 'block';
      event.target.classList.add('active');
    }

    // Save API key to localStorage
    function saveApiKey() {
      const apiKey = document.getElementById('api-key').value;
      if (apiKey) {
        localStorage.setItem('openai-api-key', apiKey);
        showTemporaryMessage(document.getElementById('api-key'), 'API key saved successfully', 'success');
      } else {
        localStorage.removeItem('openai-api-key');
        showTemporaryMessage(document.getElementById('api-key'), 'API key removed', 'success');
      }
    }

    // Basic code generation function
    function generateCode() {
      const desc = document.getElementById("description").value.toLowerCase();
      const language = document.getElementById("language").value;
      const codeArea = document.getElementById("code");

      let code = "";

      if (language === "js") {
        if (desc.includes("button") && desc.includes("color")) {
          code = `// Create a button to change background color
const button = document.createElement("button");
button.textContent = "Change Color";
button.style.padding = "10px 20px";
button.style.margin = "10px";
button.style.backgroundColor = "#4CAF50";
button.style.color = "white";
button.style.border = "none";
button.style.borderRadius = "5px";
button.style.cursor = "pointer";

// Add hover effect
button.addEventListener("mouseenter", function() {
  button.style.transform = "scale(1.05)";
  button.style.transition = "transform 0.2s";
});

button.addEventListener("mouseleave", function() {
  button.style.transform = "scale(1)";
});

// Change background color on click
button.addEventListener("click", function() {
  const randomColor = "#" + Math.floor(Math.random()*16777215).toString(16);
  document.body.style.transition = "background-color 0.5s ease";
  document.body.style.backgroundColor = randomColor;
});

document.body.appendChild(button);`;
        } else if (desc.includes("time") || desc.includes("clock")) {
          code = `// Display real-time clock
function updateTime() {
  const now = new Date();
  const timeString = now.toLocaleTimeString();
  
  // Create time display element if it doesn't exist
  let timeDisplay = document.getElementById('time-display');
  if (!timeDisplay) {
    timeDisplay = document.createElement('div');
    timeDisplay.id = 'time-display';
    timeDisplay.style.fontSize = '2rem';
    timeDisplay.style.fontWeight = 'bold';
    timeDisplay.style.textAlign = 'center';
    timeDisplay.style.margin = '20px';
    timeDisplay.style.padding = '20px';
    timeDisplay.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';
    timeDisplay.style.borderRadius = '10px';
    document.body.appendChild(timeDisplay);
  }
  
  timeDisplay.textContent = timeString;
}

// Update time every second
setInterval(updateTime, 1000);
updateTime(); // Initial call`;
        } else if (desc.includes("welcome") || desc.includes("greeting")) {
          code = `// Create an interactive welcome message
const welcomeModal = document.createElement('div');
welcomeModal.style.position = 'fixed';
welcomeModal.style.top = '0';
welcomeModal.style.left = '0';
welcomeModal.style.width = '100%';
welcomeModal.style.height = '100%';
welcomeModal.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
welcomeModal.style.display = 'flex';
welcomeModal.style.justifyContent = 'center';
welcomeModal.style.alignItems = 'center';
welcomeModal.style.zIndex = '1000';

const modalContent = document.createElement('div');
modalContent.style.backgroundColor = 'var(--bg-light)';
modalContent.style.padding = '2rem';
modalContent.style.borderRadius = '10px';
modalContent.style.textAlign = 'center';
modalContent.style.maxWidth = '400px';

const welcomeText = document.createElement('h2');
welcomeText.textContent = 'Welcome to our Educational Platform!';
welcomeText.style.color = 'var(--primary)';
welcomeText.style.marginBottom = '1rem';

const closeButton = document.createElement('button');
closeButton.textContent = 'Start Learning';
closeButton.style.padding = '10px 20px';
closeButton.style.backgroundColor = 'var(--accent)';
closeButton.style.color = 'white';
closeButton.style.border = 'none';
closeButton.style.borderRadius = '5px';
closeButton.style.cursor = 'pointer';

closeButton.addEventListener('click', function() {
  document.body.removeChild(welcomeModal);
});

modalContent.appendChild(welcomeText);
modalContent.appendChild(closeButton);
welcomeModal.appendChild(modalContent);
document.body.appendChild(welcomeModal);`;
        } else {
          code = `// ü§ñ I didn't fully understand your description
// Try to be more specific in describing the code you want to create

// Examples:
// - "A button that changes background color"
// - "Display real-time clock"
// - "Interactive welcome message"

console.log("Input description: ${desc}");
alert("ü§ñ I didn't fully understand your description. Please try to be more specific.");`;
        }
      } else if (language === "html") {
        code = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generated HTML</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Hello World!</h1>
        <p>This is a basic HTML page.</p>
    </div>
</body>
</html>`;
      } else if (language === "css") {
        code = `/* Basic CSS styles */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #333;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.card {
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
}

.card:hover {
    transform: translateY(-5px);
}

.button {
    display: inline-block;
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    text-decoration: none;
    border-radius: 5px;
    transition: background-color 0.3s;
}

.button:hover {
    background-color: #45a049;
}

@media (max-width: 768px) {
    .container {
        padding: 10px;
    }
    
    .card {
        padding: 15px;
    }
}`;
      } else if (language === "python") {
        code = `# Generated Python code from description
print("Welcome to Python Code Generation!")

def main():
    # Example function demonstrating basic Python features
    name = "User"
    print(f"Hello, {name}!")
    
    # Demonstrate loops and conditionals
    numbers = [1, 2, 3, 4, 5]
    print("\\nNumber analysis:")
    
    for num in numbers:
        if num % 2 == 0:
            print(f"{num} is even")
        else:
            print(f"{num} is odd")
    
    # List comprehension example
    squares = [x**2 for x in numbers]
    print(f"\\nSquares: {squares}")
    
    # Dictionary example
    person = {
        "name": name,
        "age": 25,
        "city": "Pythonville"
    }
    
    print(f"\\nPerson data: {person}")

if __name__ == "__main__":
    main()`;
      }

      codeArea.value = code;
      addToHistory(desc, code, language);
    }

    // All other existing functions (runCode, explainCode, refactorCode, etc.)
    // remain exactly the same as in the previous implementation

    // Utility functions
    function showOutput(message, type) {
      const output = document.getElementById("output");
      output.textContent = message;
      output.className = type;
    }

    function showAIOutput(message, type) {
      const output = document.getElementById("ai-output");
      output.textContent = message;
      output.className = type;
    }

    function showAILoader(show) {
      document.getElementById("ai-loader").style.display = show ? "block" : "none";
    }

    function showTemporaryMessage(element, message, type) {
      const originalBorder = element.style.border;
      element.style.border = type === "success" ? "2px solid #4CAF50" : "2px solid #ff4081";
      
      setTimeout(() => {
        element.style.border = originalBorder;
      }, 2000);
    }

    // History management
    function addToHistory(description, code, language) {
      const history = JSON.parse(localStorage.getItem('code-history') || '[]');
      
      history.unshift({
        id: Date.now(),
        description,
        code,
        language,
        timestamp: new Date().toLocaleString(),
        preview: code.substring(0, 100) + '...'
      });
      
      if (history.length > 10) {
        history.pop();
      }
      
      localStorage.setItem('code-history', JSON.stringify(history));
      loadHistory();
    }

    function loadHistory() {
      const history = JSON.parse(localStorage.getItem('code-history') || '[]');
      const historyList = document.getElementById('history-list');
      
      historyList.innerHTML = '';
      
      if (history.length === 0) {
        historyList.innerHTML = '<p style="text-align: center; opacity: 0.7;">No items in history</p>';
        return;
      }
      
      history.forEach(item => {
        const historyItem = document.createElement('div');
        historyItem.className = 'history-item';
        historyItem.innerHTML = `
          <div class="history-title">${item.description}</div>
          <div class="history-preview">${item.preview}</div>
          <div style="font-size: 0.7rem; opacity: 0.6; margin-top: 0.3rem;">${item.timestamp} - ${item.language}</div>
        `;
        
        historyItem.addEventListener('click', () => {
          document.getElementById('code').value = item.code;
          document.getElementById('language').value = item.language;
          showOutput(`Loaded code from history (${item.timestamp})`, "success");
          switchTab('code-execution');
        });
        
        historyList.appendChild(historyItem);
      });
    }

    function clearHistory() {
      if (confirm('Are you sure you want to clear code history?')) {
        localStorage.removeItem('code-history');
        loadHistory();
        showOutput("History cleared", "success");
      }
    }

    function clearOutput() {
      document.getElementById("output").textContent = "üí° Output will appear here...";
      document.getElementById("output").className = "";
    }

    // Placeholder for other existing functions
    function runCode() {
      const code = document.getElementById("code").value;
      const language = document.getElementById("language").value;
      const output = document.getElementById("output");
      
      output.classList.remove("error", "success");
      output.innerHTML = "";

      try {
        if (language === "js") {
          // Safe execution for JavaScript
          const originalLog = console.log;
          let logOutput = "";
          
          console.log = function(...args) {
            logOutput += args.map(arg => 
              typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ') + '\n';
          };
          
          const safeEval = new Function(`
            "use strict";
            ${code}
          `);
          
          safeEval();
          
          console.log = originalLog;
          
          output.textContent = logOutput || "‚úÖ Code executed successfully";
          output.classList.add("success");
        } else {
          output.textContent = `‚ö†Ô∏è Cannot run ${language} code directly in the browser. Use an appropriate environment for the language.`;
          output.classList.add("error");
        }
      } catch (e) {
        output.textContent = "‚ùå Error: " + e.message;
        output.classList.add("error");
      }
    }

    // Placeholder for other AI features
    function explainCode() {
      const code = document.getElementById("code").value;
      if (!code.trim()) {
        showAIOutput("‚ö†Ô∏è Please enter code first", "error");
        return;
      }
      
      showAILoader(true);
      
      setTimeout(() => {
        const explanation = `Code Explanation:

üìù This code does the following:
‚Ä¢ Creates dynamic HTML elements using JavaScript
‚Ä¢ Adds event handlers for user interaction
‚Ä¢ Applies dynamic CSS styles to change appearance

üîç Important points:
- The code starts by creating new DOM elements
- Properties and styles are added to each element
- There are event handlers for events like click and mouseenter

üí° Suggestions:
1. You could add error handling
2. Separate styles into a dedicated CSS file
3. Use classes instead of inline styles`;
        
        showAIOutput(explanation, "success");
        showAILoader(false);
      }, 1500);
    }

    // Add similar placeholder implementations for:
    // refactorCode, optimizeCode, addComments, translateCode, suggestImprovements,
    // codeReview, generateTests, detectPatterns, securityScan, performanceAnalysis,
    // codeVisualization, aiCodeCompletion, bugPrediction, architectureSuggestions,
    // codeMetrics, learningRecommendations, aiPairProgramming

    // These would be implemented similarly to the explainCode function

  </script>
</body>
</html>
